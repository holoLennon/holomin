appctrl.controller("OrderrListCtrl",function(e,r,t,i,n,a,o,d,l,s,c,g,f,u,p,m,b){g.debug("enter OrderrList ctrl");var h=u.act;var L=u.memberId;g.debug("act="+h+",memberId="+L);e.page=_.clone(_Page);e.list=[];e.$on("$ionicView.beforeEnter",function(){g.debug("OrderrList ctrl beforeEnter")});e.$on("$ionicView.afterEnter",function(){g.debug("OrderrList ctrl afterEnter");if(ctrlReinitMap.get("OrderrListCtrl")){ctrlReinitMap.remove("OrderrListCtrl");g.debug("OrderrList ctrl afterEnter init");e.init()}});e.init=function(){g.debug("OrderrList ctrl init ");g.debug("act="+h+",memberId="+L);if(h==0){e.page.where="iotype=0 and memberId="+L}else if(h==1){e.page.where="iotype=0 and doctorWr="+e.meuser.id}else if(h==2){e.page.where="(iotype=1 or iotype=2) and doctorId="+e.meuser.id}else if(h==3){e.page.where="(iotype=2 and doctorId="+e.meuser.id+")or"+(" iotype=0 and doctorWr="+e.meuser.id+")")}e.page.pageNo=1;e.page.hasNextPage=false;e.list=[];e.first()};e.doRefresh=function(){e.init()};e.addList=function(r){angular.forEach(r,function(r){e.list.push(r)});if(r&&r.length<e.page.pageSize){e.page.hasNextPage=false}else{e.page.hasNextPage=true}if(e.list.length<1){b.alertm("您的会员还未下过订单！")}};e.first=function(){m.first(null,e.page).then(function(r){g.debug("OrderrList ctrl query then");e.addList(r);e.$broadcast("scroll.refreshComplete")})};e.more=function(){g.debug("OrderrList ctrl more=========");if(!e.page.hasNextPage){return}m.more(e.page).then(function(r){g.debug("OrderrList ctrl more then");e.addList(r);e.$broadcast("scroll.infiniteScrollComplete")})};e.init();ctrlReinitMap.remove("OrderrListCtrl")});