appservice.service("WxService",function(e,o,n,r,i,s,a){i.debug("WxService in");var c=false;var t;var u;return{config:function(){var e=n.defer();var o=a.api+"/wxConfig";var s=location.href.split("#")[0];r({method:"GET",url:o,params:{surl:s}}).success(function(o,n,r,s){i.debug("wx config");wxConfig=o;i.debug(wxConfig);wx.config({debug:false,appId:wxConfig.appId,timestamp:wxConfig.timestamp,nonceStr:wxConfig.noncestr,signature:wxConfig.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]});wx.ready(function(){i.debug("if debug is true then you will see config.wx.ready");c=true;e.resolve()});wx.error(function(o){i.debug("config.wx.error");console.log(o);c=false;e.reject(o)})});return e.promise},getLocation:function(){var e=n.defer();wx.getLocation({type:"gcj02",success:function(o){t=o.latitude;u=o.longitude;var n=o.speed;var r=o.accuracy;e.resolve([u,t])}});return e.promise},scanQRCode:function(e){var o=e?e:0;wx.scanQRCode({needResult:0,scanType:["qrCode","barCode"],success:function(e){var o=e.resultStr;deferred.resolve(o)}});return deferred.promise},pay:function(e){wx.chooseWXPay({timestamp:e.timestamp1,nonceStr:e.noncestr,package:e.package1,signType:e.signtype,paySign:e.paysign,success:function(e){console.log("wx.chooseWXPay success");console.log(e);deferred.resolve(e)}});return deferred.promise},tmp1:function(){return 0},tmp:function(){return 0}}});