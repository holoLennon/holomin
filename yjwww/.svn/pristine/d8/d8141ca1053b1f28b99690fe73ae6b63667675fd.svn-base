appservice.service("ProductTypeService",function(e,r,t,n,u,i){u.debug("ProductTypeService in");var o;var c;var a={where:"",pageNo:1,pageSize:DEFPAGESIZE,hasNextPage:true,cmd:""};var s=i.api+"/ProductType";return{first:function(e,r){if(r){if(e)r.where=e;r.pageNo=1;return this.query(r)}a.where=e?e:"";a.pageNo=1;return this.query()},more:function(e){if(e){e.pageNo=e.pageNo+1;return this.query(e)}a.pageNo=a.pageNo+1;return this.query()},query:function(e){var r=a;if(e)r=e;var u=t.defer();var i=s+"/query";n({method:"GET",url:i,params:r}).success(function(e,r,t,n){o=_.union(o,e);u.resolve(e)});return u.promise},tree:function(e){var r=a;if(e)r=e;var u=t.defer();var i=s+"/tree";n({method:"GET",url:i,params:r}).success(function(e,r,t,n){o=_.union(o,e);u.resolve(e)});return u.promise},treebypid:function(e,r){var u=a;if(e)u=e;u=_.extend(u,{pid:r});var i=t.defer();var c=s+"/treebypid";n({method:"GET",url:c,params:u}).success(function(e,r,t,n){o=_.union(o,e);i.resolve(e)});return i.promise},treebyckey:function(e,r){var u=a;if(e)u=e;u=_.extend(u,{ckey:r});var i=t.defer();var c=s+"/treebyckey";n({method:"GET",url:c,params:u}).success(function(e,r,t,n){o=_.union(o,e);i.resolve(e)});return i.promise},newget:function(e){var r=a;if(e)r=e;var u=t.defer();var i=s+"/getnew";n({method:"GET",url:i,params:r}).success(function(e,r,t,n){o=_.union(o,e);u.resolve(e)});return u.promise},create:function(e,r){var i=a;if(r)i=r;var c=_.omit(e,function(e,r,t){return _.isObject(e)||_.isArray(e)||r.indexOf("String")!=-1||r.indexOf("gmt")!=-1});c=_.extend(c,{cmd:i.cmd});u.debug("ProductTypeService create");u.debug(c);var f=t.defer();var d=s+"/create";n({method:"POST",url:d,params:c}).success(function(e,r,t,n){o=_.union(o,e);f.resolve(e)});return f.promise},update:function(e,r){var i=a;if(r)i=r;var c=_.omit(e,function(e,r,t){return _.isObject(e)||_.isArray(e)||r.indexOf("String")!=-1||r.indexOf("gmt")!=-1});c=_.extend(c,{cmd:i.cmd});u.debug("ProductTypeService update");u.debug(c);var f=t.defer();var d=s+"/update";n({method:"POST",url:d,params:c}).success(function(e,r,t,n){o=_.union(o,e);f.resolve(e)});return f.promise},getlocal:function(e){for(var r in o){if(o[r].id.toString()===e.toString()){return o[r]}}return{}},get:function(e,r){var u=a;if(r)u=r;var i=t.defer();var o=s+"/get/"+e;n({method:"GET",url:o,params:u}).success(function(e,r,t,n){i.resolve(e)});return i.promise},getckey:function(e,r){var u=a;if(r)u=r;var i=t.defer();var o=s+"/getckey/"+e;n({method:"GET",url:o,params:u}).success(function(e,r,t,n){i.resolve(e)});return i.promise},getList:function(){return o},getPage:function(){return a},getObj:function(){return c},newObj:function(){return _.clone(_ProductType)}}});