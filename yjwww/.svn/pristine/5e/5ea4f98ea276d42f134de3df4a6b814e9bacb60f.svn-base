appctrl.controller("MystoreCtrl",function(e,t,n,o,r,i,l,c,s,u,f,g,a,M,d,E,p,y){n.debug("enter Mystore ctrl");e.$on("$ionicView.beforeEnter",function(){console.log("Mystore ctrl beforeEnter")});e.$on("$ionicView.afterEnter",function(){console.log("Mystore ctrl afterEnter");if(ctrlReinitMap.get("MystoreCtrl")){ctrlReinitMap.remove("MystoreCtrl");e.init()}e.user=p.get(LOGINED_USER_C)});e.lnglat=[0,0];e.pageinit=function(){console.log("Mystore pageinit ")};e.init=function(){console.log("Mystore init ");if(wxNoOpenid()){window.location.href=outGetOpenidUrl_c;return}e.user=p.get(LOGINED_USER_C);if(e.user==null){e.$broadcast("scroll.refreshComplete");return}if(e.user!=null){y.get(e.user.id).then(function(t){n.debug("Mystore ctrl get then");e.obj=t;n.debug(t)})}};e.$on("event.logined",function(){console.log("Mystore ctrl event.logined");e.init()});e.logout=function(){E.confirm("确认退出？").then(function(t){if(t){e.user=null;p.remove(LOGINED_USER_C);var n=p.get(CLIENT_INFO);n.token=null;p.set(CLIENT_INFO,n);M.goBack()}else{}})};e.login=function(){t.$broadcast("event.NeedLoginException","Mystore")};e.clear=function(){p.clear();E.alertm("清除缓存");e.init()};e.editpassword=function(){E.alertm("请与客服联系，我们确认后给你重新分配初始密码")};e.init();ctrlReinitMap.remove("MystoreCtrl")});