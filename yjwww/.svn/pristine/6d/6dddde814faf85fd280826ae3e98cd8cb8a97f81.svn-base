appctrl.controller("myCtrl",function(e,n,t,o,i,r,l,c,u,f,g,s,a,m,d,E,p){console.log("enter my ctrl");e.watersite={};e.$on("$ionicView.beforeEnter",function(){console.log("my ctrl beforeEnter")});e.$on("$ionicView.afterEnter",function(){console.log("my ctrl afterEnter");if(ctrlReinitMap.get("myCtrl")){ctrlReinitMap.remove("myCtrl");e.init()}e.user=d.get(LOGINED_USER_B)});e.lnglat=[0,0];e.pageinit=function(){console.log("my pageinit ")};e.init=function(){console.log("my init ");if(wxNoOpenid()){window.location.href=outGetOpenidUrl_b;return}e.user=d.get(LOGINED_USER_B);if(e.user==null){e.$broadcast("scroll.refreshComplete");return}if(e.user!=null){p.get(e.user.id).then(function(n){s.debug("my ctrl get then");e.obj=n;s.debug(n)})}};e.doRefresh=function(){e.init()};e.$on("event.logined",function(){console.log("my ctrl event.logined");e.init()});e.login=function(){t.$broadcast("event.NeedLoginException","my")};e.logout=function(){m.confirm("确认退出？").then(function(n){if(n){e.user=null;d.remove(LOGINED_USER_B);var t=d.get(CLIENT_INFO);t.token=null;d.set(CLIENT_INFO,t);u.goBack()}else{}})};e.clear=function(){d.clear();m.alertm("清除缓存");e.init()};e.editpassword=function(){m.alertm("请与客服联系，我们确认后给你重新分配初始密码")};e.init()});