appctrl.controller("OrderrCtrl",function(r,e,t,i,n,o,l,g,d,a,u,c,s,b,f,O,p,h,j){t.debug("enter Orderr ctrl");var v=s.id;r.vm={};r.vm.isedit=false;if(v==="0")r.vm.isedit=true;r.obj={};r.listDrugstore=[];r.drugstore={};r.pageDrugstore=_.clone(_Page);r.$on("$ionicView.beforeEnter",function(){t.debug("Orderr ctrl beforeEnter1")});r.$on("$ionicView.afterEnter",function(){t.debug("Orderr ctrl afterEnter");if(ctrlReinitMap.get("OrderrCtrl")){ctrlReinitMap.remove("OrderrCtrl");t.debug("Orderr ctrl afterEnter init");r.init()}});r.init=function(){t.debug("Orderr ctrl init id="+v);r.get()};r.getlocal=function(){t.debug("Orderr ctrl getlocal id="+v);if(isblank0(v)){r.obj=_.clone(_Orderr)}else{r.obj=O.getlocal(v)}t.debug(r.obj)};r.get=function(){t.debug("Orderr ctrl get id="+v);if(isblank0(v)){O.newget().then(function(e){t.debug("Orderr ctrl newget then");r.obj=e})}else{O.get(v).then(function(e){t.debug("Orderr ctrl get then");r.obj=e})}};r.save=function(){t.debug("Orderr ctrl get id="+v);t.debug(r.obj);if(isblanklist(r.listCart))return;for(var e=0;e<r.listCart.length;e++){var i=r.listCart[e];i.obj1=""}var n=window.JSON.stringify(r.listCart);r.obj.obj1=n;h.memberCartToOrderr(r.obj).then(function(e){t.debug("Orderr ctrl save then");r.obj=e;r.listCart=[];j.remove(LISTCART);ctrlReinitMap.put("tabCtrl",1)});f.alertm("订单已生成，请记住订单号，去药店取药")};r.addListDrugstore=function(e){angular.forEach(e,function(e){r.listDrugstore.push(e)});if(e&&e.length<r.pageDrugstore.pageSize){r.pageDrugstore.hasNextPage=false}else{r.pageDrugstore.hasNextPage=true}};r.choseDrugstore=function(e){r.obj.drugstoreId=e.id;r.drugstore=e;r.pop_mdrugstorelist.hide()};r.init();ctrlReinitMap.remove("OrderrCtrl")});