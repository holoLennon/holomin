appservice.service("TopicService",function(e,r,n,t,i,u){i.debug("TopicService in");var o;var a;var c={where:"",pageNo:1,pageSize:DEFPAGESIZE,hasNextPage:true,cmd:""};var s=u.api+"/Topic";return{first:function(e,r){if(r){if(e)r.where=e;r.pageNo=1;return this.query(r)}c.where=e?e:"";c.pageNo=1;return this.query()},more:function(e){if(e){e.pageNo=e.pageNo+1;return this.query(e)}c.pageNo=c.pageNo+1;return this.query()},query:function(e){var r=c;if(e)r=e;var i=n.defer();var u=s+"/query";t({method:"GET",url:u,params:r}).success(function(e,r,n,t){o=_.union(o,e);i.resolve(e)});return i.promise},newget:function(e){var r=c;if(e)r=e;var i=n.defer();var u=s+"/getnew";t({method:"GET",url:u,params:r}).success(function(e,r,n,t){o=_.union(o,e);i.resolve(e)});return i.promise},create:function(e,r){var u=c;if(r)u=r;var a=_.omit(e,function(e,r,n){return _.isObject(e)||_.isArray(e)||r.indexOf("String")!=-1||r.indexOf("gmt")!=-1});a=_.extend(a,{cmd:u.cmd});i.debug("TopicService create");i.debug(a);var f=n.defer();var v=s+"/create";t({method:"POST",url:v,params:a}).success(function(e,r,n,t){o=_.union(o,e);f.resolve(e)});return f.promise},update:function(e,r){var u=c;if(r)u=r;var a=_.omit(e,function(e,r,n){return _.isObject(e)||_.isArray(e)||r.indexOf("String")!=-1||r.indexOf("gmt")!=-1});a=_.extend(a,{cmd:u.cmd});i.debug("TopicService update");i.debug(a);var f=n.defer();var v=s+"/update";t({method:"POST",url:v,params:a}).success(function(e,r,n,t){o=_.union(o,e);f.resolve(e)});return f.promise},getlocal:function(e){for(var r in o){if(o[r].id.toString()===e.toString()){return o[r]}}return{}},get:function(e,r){var i=c;if(r)i=r;var u=n.defer();var o=s+"/get/"+e;t({method:"GET",url:o,params:i}).success(function(e,r,n,t){u.resolve(e)});return u.promise},getList:function(){return o},getPage:function(){return c},getObj:function(){return a},newObj:function(){return _.clone(_Topic)}}});